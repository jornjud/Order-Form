/* --- การตั้งค่าพื้นฐานและฟอนต์ --- */
@import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@400;500;600;700&display=swap');

html {
    scroll-behavior: smooth; /* ทำให้การเลื่อนหน้าสมูท */
}

body {
    font-family: 'Sarabun', sans-serif; /* ใช้ฟอนต์ Sarabun */
    background-color: #f3f4f6; /* สีพื้นหลังเทาอ่อน (Tailwind bg-gray-100) */
    padding-bottom: 90px; /* เพิ่มพื้นที่ด้านล่างเผื่อปุ่มลอย */
    margin: 0; /* ลบ margin เริ่มต้นของ body */
    color: #1f2937; /* สีตัวหนังสือหลัก (Tailwind text-gray-800) */
}

.container {
    /* ใช้สำหรับจำกัดความกว้างและจัดกลาง (เหมือน Tailwind container mx-auto) */
    width: 100%;
    max-width: 1024px; /* หรือค่าอื่นๆ ตามต้องการ */
    margin-left: auto;
    margin-right: auto;
    padding-left: 0.75rem; /* px-3 */
    padding-right: 0.75rem; /* px-3 */
    padding-top: 1rem; /* pt-4 */
}

h1 {
    /* สไตล์หัวข้อหลัก */
    font-size: 1.875rem; /* text-3xl */
    line-height: 2.25rem;
    font-weight: 700; /* font-bold */
    margin-bottom: 1.5rem; /* mb-6 */
    text-align: center; /* text-center */
    color: #4338ca; /* text-indigo-700 */
}

/* --- ส่วนของร้านค้า --- */
.shop-section {
    border: 1px solid #e5e7eb; /* border border-gray-200 */
    border-radius: 0.75rem; /* rounded-xl */
    padding: 1rem 1rem 1.5rem 1rem; /* ปรับ padding */
    margin-bottom: 1.5rem; /* mb-6 */
    background-color: #ffffff; /* bg-white */
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); /* shadow-md */
}

.shop-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem; /* mb-4 */
    padding-bottom: 0.5rem; /* pb-2 */
    border-bottom: 1px solid #e5e7eb; /* border-b border-gray-200 */
}

.shop-name-input {
    font-size: 1.4rem; /* ใหญ่ขึ้น */
    font-weight: 600; /* หนาขึ้น */
    color: #1f2937; /* text-gray-800 */
    border: none;
    border-bottom: 2px solid transparent; /* ซ่อนเส้นใต้ปกติ */
    padding-bottom: 4px;
    margin-right: 0.5rem; /* เว้นระยะจากปุ่มลบ */
    outline: none;
    transition: border-color 0.3s ease;
    width: calc(100% - 40px); /* กัน input ชนปุ่มลบ */
    background-color: transparent; /* ทำให้พื้นหลังโปร่งใส */
}
.shop-name-input:focus {
    border-bottom-color: #3b82f6; /* แสดงเส้นใต้สีฟ้าเมื่อ focus (Tailwind border-blue-500) */
}

.delete-shop-btn {
    background-color: transparent;
    color: #ef4444; /* text-red-500 */
    padding: 0.35rem; /* ใหญ่ขึ้น */
    border-radius: 9999px; /* rounded-full */
    transition: background-color 0.2s ease, color 0.2s ease;
    flex-shrink: 0; /* ไม่ให้ปุ่มหด */
    border: none; /* เอา border ออก */
    cursor: pointer;
}
.delete-shop-btn svg {
    width: 22px; /* icon ใหญ่ขึ้น */
    height: 22px;
    display: block; /* แก้ปัญหา space ใต้ svg */
}
.delete-shop-btn:hover {
    background-color: #fee2e2; /* bg-red-100 */
    color: #dc2626; /* text-red-700 */
}

/* --- แถวรายการสินค้า --- */
.items-list {
    /* Container สำหรับ item rows (อาจจะไม่ต้องมีสไตล์พิเศษ) */
}

.item-row {
    display: grid;
    /* Mobile: จำนวน/หน่วย แถวบน, รายการ/ลบ แถวล่าง */
    grid-template-columns: 1fr 1fr; /* แบ่งครึ่งเท่าๆ กัน */
    grid-template-areas:
        "quantity unit"
        "item item"
        "delete delete"; /* ปุ่มลบเต็มแถว */
    gap: 0.5rem; /* ลด gap */
    margin-bottom: 1rem; /* เพิ่มระยะห่างระหว่างรายการ */
    align-items: center; /* จัดกลางแนวตั้ง */
}
/* Desktop (sm breakpoint): ปรับความกว้าง จำนวน/หน่วย ให้แคบลง */
@media (min-width: 640px) {
    .item-row {
        /* จำนวน(แคบ) หน่วย(แคบ) รายการ(กว้าง) ปุ่มลบ(auto) */
        grid-template-columns: 4.5rem 5.5rem 1fr auto; /* ปรับความกว้าง */
        grid-template-areas: "quantity unit item delete"; /* กำหนดพื้นที่ */
        gap: 0.6rem; /* ปรับ gap เล็กน้อย */
        margin-bottom: 0.75rem;
    }
    .item-row .remove-btn-container {
        grid-area: delete;
        justify-self: end; /* ดันไปขวาสุด */
    }
}

/* กำหนดพื้นที่ให้แต่ละ element */
.item-row .quantity-input { grid-area: quantity; }
.item-row .unit-input { grid-area: unit; } /* เปลี่ยนจาก unit-select */
.item-row .item-input { grid-area: item; min-width: 0;} /* ให้ input ย่อได้ */
.item-row .remove-btn-container {
     grid-area: delete;
     justify-self: end; /* ปุ่มลบไปขวาสุดเสมอ (ใน mobile view) */
}

/* สไตล์ input/select/datalist input ในแถวรายการ */
.item-row input, .item-row select { /* select ยังคงเผื่อไว้ */
    border: 1px solid #d1d5db; /* border-gray-300 */
    border-radius: 0.375rem; /* rounded-md */
    padding: 0.6rem 0.75rem; /* เพิ่ม padding ให้กดง่าย */
    font-size: 1rem; /* ใหญ่ขึ้นเล็กน้อย */
    line-height: 1.3;
    transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    width: 100%; /* ทำให้เต็มพื้นที่ grid area */
    box-sizing: border-box; /* รวม padding/border ใน width */
}
 .item-row input:focus, .item-row select:focus {
    outline: none;
    border-color: #3b82f6; /* focus:border-blue-500 */
    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3); /* focus:ring-2 focus:ring-blue-300 */
}
.quantity-input {
     text-align: center;
}

/* ปุ่มลบรายการ */
.remove-btn {
    padding: 0.6rem; /* ใหญ่ขึ้น */
    background-color: #ef4444; /* bg-red-500 */
    color: white;
    border-radius: 0.375rem; /* rounded-md */
    transition: background-color 0.2s ease-in-out;
    display: inline-flex; /* ทำให้ icon อยู่กลาง */
    align-items: center;
    justify-content: center;
    border: none;
    cursor: pointer;
    line-height: 1; /* ป้องกันความสูงเพี้ยน */
}
.remove-btn svg {
     width: 18px;
     height: 18px;
     display: block;
}
.remove-btn:hover {
    background-color: #dc2626; /* hover:bg-red-700 */
}

/* --- ปุ่มดำเนินการทั่วไป --- */
.action-button {
     font-weight: 600; /* font-semibold */
     padding: 0.7rem 1.1rem; /* ใหญ่ขึ้น */
     border-radius: 0.5rem; /* rounded-lg */
     box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); /* shadow-sm */
     display: inline-flex;
     align-items: center;
     justify-content: center; /* จัดกลาง */
     gap: 0.4rem; /* gap-1.5 */
     font-size: 0.95rem; /* ปรับขนาด font */
     line-height: 1; /* ป้องกันปุ่มสูงแปลกๆ */
     border: none; /* เอา border เริ่มต้นออก */
     cursor: pointer;
     transition: all 0.2s ease-in-out;
     text-align: center; /* จัดกลางข้อความ */
     width: 100%; /* ทำให้เต็มความกว้างบนมือถือ */
}
@media (min-width: 640px) {
    .action-button {
        width: auto; /* บนจอใหญ่ให้กว้างตามเนื้อหา */
    }
}

.action-button svg {
    width: 18px; /* ขนาด icon ในปุ่ม */
    height: 18px;
}

.action-button:hover:not(.remove-btn):not(.close-btn):not(.delete-shop-btn) {
     opacity: 0.9;
     transform: scale(1.02);
}

/* สไตล์เฉพาะปุ่ม */
.add-shop-main-btn {
    background-image: linear-gradient(to right, #10b981, #059669); /* from-green-500 to-emerald-600 */
    color: white;
}
.add-shop-main-btn:hover {
    background-image: linear-gradient(to right, #059669, #047857); /* hover:from-green-600 hover:to-emerald-700 */
}

.add-item-btn { /* ปุ่มเพิ่มรายการในร้าน */
    background-color: #3b82f6; /* bg-blue-500 */
    color: white;
}
.add-item-btn:hover {
    background-color: #2563eb; /* hover:bg-blue-600 */
}

.summarize-btn { /* ปุ่มสรุปรายการร้านนี้ */
    background-color: #a855f7; /* bg-purple-500 */
    color: white;
}
.summarize-btn:hover {
    background-color: #9333ea; /* hover:bg-purple-600 */
}

.overall-summary-main-btn {
    background-image: linear-gradient(to right, #14b8a6, #06b6d4); /* from-teal-500 to-cyan-500 */
    color: white;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* shadow-xl */
}
.overall-summary-main-btn:hover {
     background-image: linear-gradient(to right, #0d9488, #0891b2); /* hover:from-teal-600 hover:to-cyan-600 */
}

.copy-btn { /* ปุ่มคัดลอกใน Modal */
    background-color: #3b82f6; /* bg-blue-500 */
    color: white;
}
.copy-btn:hover {
    background-color: #2563eb; /* hover:bg-blue-600 */
}

.close-action-btn { /* ปุ่มปิดใน Modal */
    background-color: #d1d5db; /* bg-gray-300 */
    color: #1f2937; /* text-gray-800 */
}
.close-action-btn:hover {
    background-color: #9ca3af; /* hover:bg-gray-400 */
}


/* --- ส่วน Loading / Error Message --- */
.loading-error {
    text-align: center;
    padding: 1rem;
    margin: 1rem auto;
    background-color: #fffbeb; /* bg-yellow-50 */
    color: #b45309; /* text-yellow-800 */
    border: 1px solid #fef3c7; /* border-yellow-200 */
    border-radius: 0.5rem; /* rounded-lg */
    max-width: 600px;
    display: none; /* ซ่อนไว้ก่อน */
    font-size: 0.9rem;
    line-height: 1.4;
}

/* --- ปุ่มสรุปทั้งหมดแบบลอย (Fixed) --- */
.summary-fixed-container { /* ID: overall-summary-container */
     position: fixed; /* ทำให้ลอย */
     bottom: 15px; /* ระยะจากขอบล่าง */
     left: 50%; /* เริ่มที่กึ่งกลาง */
     transform: translateX(-50%); /* ย้ายกลับมาตรงกลาง */
     z-index: 900; /* อยู่เหนือเนื้อหา แต่ใต้ modal */
     display: none; /* ซ่อนไว้ก่อน รอ JS แสดง */
     width: auto; /* ให้กว้างตามเนื้อหา */
     max-width: 90%; /* ไม่ให้กว้างเกินไป */
 }

/* --- Modal สรุปรายการ --- */
.modal { /* ID: summaryModal */
    display: none; /* ซ่อนไว้ก่อน */
    position: fixed;
    z-index: 1000; /* อยู่หน้าสุด */
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto; /* มี scrollbar ถ้าเนื้อหาล้น */
    background-color: rgba(0,0,0,0.65); /* พื้นหลังดำโปร่งแสง */
    padding-top: 5vh; /* ระยะห่างจากขอบบน */
}
.modal-content {
    background-color: #fefefe; /* พื้นหลังขาว */
    margin: auto; /* จัดกึ่งกลาง */
    padding: 20px; /* ลด padding เล็กน้อย */
    border: none; /* เอาขอบออก */
    width: 92%; /* กว้างขึ้นอีก */
    max-width: 600px; /* จำกัดความกว้างสูงสุด */
    border-radius: 0.75rem; /* rounded-xl */
    box-shadow: 0 10px 25px rgba(0,0,0,0.2); /* เพิ่มเงาให้ชัดเจน */
    position: relative; /* สำหรับจัดตำแหน่งปุ่มปิด */
}
.close-btn { /* ID: modal-close-btn */
    color: #aaa;
    position: absolute; /* จัดตำแหน่งเทียบกับ modal-content */
    top: 10px;
    right: 15px;
    font-size: 35px;
    font-weight: bold;
    line-height: 0.8;
    padding: 0;
    border: none;
    background: none;
    cursor: pointer;
}
.close-btn:hover,
.close-btn:focus {
    color: black;
    text-decoration: none;
}

.summary-modal-content { /* ID: summaryContent */
    space-y: 1rem; /* space-y-4 */
    max-height: 65vh; /* จำกัดความสูง */
    overflow-y: auto; /* มี scrollbar แนวตั้ง */
    padding-right: 0.5rem; /* pr-2 */
    margin-bottom: 1rem; /* เว้นระยะก่อนถึงปุ่ม */
}
.summary-modal-content > div { /* สไตล์สำหรับแต่ละ shop div ใน modal */
    margin-bottom: 0.75rem; /* mb-3 */
    padding: 0.75rem; /* p-3 */
    border: 1px solid #f3f4f6; /* border border-gray-100 */
    border-radius: 0.5rem; /* rounded-lg */
    background-color: #f9fafb; /* bg-gray-50 */
    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); /* shadow-sm */
}
.summary-modal-content h3 {
    font-size: 1.125rem; /* text-lg */
    line-height: 1.75rem;
    font-weight: 600; /* font-semibold */
    margin-bottom: 0.5rem; /* mb-2 */
    color: #1f2937; /* text-gray-800 */
    border-bottom: 1px solid #e5e7eb; /* border-b border-gray-200 */
    padding-bottom: 0.375rem; /* pb-1.5 */
}
.summary-modal-content ul {
    list-style: none;
    padding-left: 0.25rem; /* pl-1 */
    margin: 0;
}
.summary-modal-content ul li {
    margin-bottom: 0.25rem; /* space-y-1 */
    color: #374151; /* text-gray-700 */
    font-size: 0.875rem; /* text-sm */
    line-height: 1.25rem;
}
.summary-modal-content p { /* สำหรับข้อความ "(ไม่มีรายการสั่งซื้อ)" */
    text-align: center;
    color: #9ca3af; /* text-gray-400 */
    font-style: italic;
    font-size: 0.875rem; /* text-sm */
    padding-top: 0.25rem; /* pt-1 */
}

.modal-actions {
    text-align: center;
    margin-top: 1.25rem; /* mt-5 */
    padding-top: 1rem; /* pt-4 */
    border-top: 1px solid #e5e7eb; /* border-t border-gray-200 */
    display: flex;
    flex-direction: column; /* เรียงแนวตั้งบนมือถือ */
    gap: 0.75rem; /* gap-3 */
}
@media (min-width: 640px) {
    .modal-actions {
        flex-direction: row; /* เรียงแนวนอนบนจอใหญ่ */
        justify-content: center; /* จัดกลาง */
    }
}

.copy-status-message { /* ID: copy-status */
    text-align: center;
    color: #059669; /* text-green-600 */
    margin-top: 0.75rem; /* mt-3 */
    font-weight: 600; /* font-semibold */
    display: none; /* ซ่อนไว้ก่อน */
    font-size: 0.9rem;
}

/* --- ส่วนของการดำเนินการในแต่ละร้าน --- */
.shop-actions {
    margin-top: 1rem; /* mt-4 */
    padding-top: 1rem; /* pt-4 */
    border-top: 1px solid #f3f4f6; /* border-t border-gray-100 */
    display: flex;
    flex-direction: column; /* เรียงแนวตั้งบนมือถือ */
    gap: 0.75rem; /* gap-3 */
}
@media (min-width: 640px) {
    .shop-actions {
        flex-direction: row; /* เรียงแนวนอนบนจอใหญ่ */
        justify-content: space-between; /* แยกปุ่มซ้ายขวา */
        align-items: center;
    }
}
