<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üõ†Ô∏è ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ V2</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms"></script>
    <style>
        /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏≠‡∏ô‡∏ï‡πå Sarabun */
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Sarabun', sans-serif;
            background-color: #f1f5f9; /* Tailwind's slate-100 */
            color: #1e293b; /* Tailwind's slate-800 */
        }
        /* Custom styles for better look */
        .container {
            max-width: 650px; /* ‡∏Ç‡∏¢‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ */
            margin: 2rem auto;
            padding: 1.5rem;
            background-color: white;
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); /* shadow-md */
        }
        h1 {
            font-size: 1.5rem; /* text-2xl */
            font-weight: 700; /* font-bold */
            margin-bottom: 1.5rem;
            text-align: center;
            color: #4f46e5; /* Tailwind's indigo-600 */
        }
        .section-title {
            font-size: 1.125rem; /* text-lg */
            font-weight: 600; /* font-semibold */
            margin-bottom: 0.75rem; /* mb-3 */
            padding-bottom: 0.5rem; /* pb-2 */
            border-bottom: 1px solid #e5e7eb; /* border-b border-gray-200 */
            color: #374151; /* text-gray-700 */
        }
        #item-list li {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0.5rem; /* py-3 px-2 */
            border-bottom: 1px solid #e5e7eb; /* border-b border-gray-200 */
        }
        #item-list li:last-child {
            border-bottom: none;
        }
        .item-text {
            flex-grow: 1;
            margin-right: 0.5rem; /* mr-2 */
            word-break: break-word; /* Handle long item names */
        }
        .remove-button {
            background-color: #ef4444; /* Tailwind's red-500 */
            color: white;
            padding: 0.3rem 0.6rem; /* py-1 px-2 */
            border-radius: 0.375rem; /* rounded-md */
            font-size: 0.875rem; /* text-sm */
            font-weight: 500;
            border: none;
            cursor: pointer;
            transition: background-color 0.2s ease;
            flex-shrink: 0; /* Prevent button from shrinking */
        }
        .remove-button:hover {
            background-color: #dc2626; /* Tailwind's red-600 */
        }
        .action-button {
            font-weight: 600;
            padding: 0.6rem 1rem;
            border-radius: 0.5rem; /* rounded-lg */
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.4rem;
            font-size: 0.95rem;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            width: 100%; /* Full width on small screens */
        }
        @media (min-width: 640px) {
            .action-button {
                width: auto; /* Auto width on larger screens */
            }
        }
         .add-button {
            background-color: #10b981; /* Tailwind's emerald-500 */
            color: white;
        }
        .add-button:hover {
            background-color: #059669; /* Tailwind's emerald-600 */
        }
        .download-button {
            background-color: #3b82f6; /* Tailwind's blue-500 */
            color: white;
        }
        .download-button:hover {
            background-color: #2563eb; /* Tailwind's blue-600 */
        }
        .load-button {
            background-color: #f97316; /* Tailwind's orange-500 */
            color: white;
            padding: 0.5rem 0.75rem; /* py-2 px-3 */
        }
        .load-button:hover {
             background-color: #ea580c; /* Tailwind's orange-600 */
        }
        .input-group {
            display: flex;
            gap: 0.5rem; /* gap-2 */
            margin-bottom: 1rem;
        }
        .input-field {
            flex-grow: 1;
            border: 1px solid #d1d5db; /* border-gray-300 */
            border-radius: 0.375rem; /* rounded-md */
            padding: 0.5rem 0.75rem; /* py-2 px-3 */
            font-size: 1rem;
        }
        .input-field:focus {
            outline: none;
            border-color: #3b82f6; /* focus:border-blue-500 */
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3); /* focus:ring-2 focus:ring-blue-200 */
        }
        .file-input-label {
            display: block; /* Make label block */
            border: 1px solid #d1d5db;
            border-radius: 0.375rem;
            padding: 0.5rem 0.75rem;
            cursor: pointer;
            background-color: #fff;
            transition: background-color 0.2s ease;
            text-align: center;
            font-weight: 500;
            color: #374151;
        }
        .file-input-label:hover {
            background-color: #f9fafb; /* bg-gray-50 */
        }
        /* Hide the default file input */
        input[type="file"] {
            display: none;
        }
        .list-container {
            max-height: 400px; /* Limit height and make scrollable */
            overflow-y: auto;
            border: 1px solid #e5e7eb; /* border border-gray-200 */
            border-radius: 0.5rem; /* rounded-lg */
            margin-bottom: 1rem;
            background-color: #f9fafb; /* bg-gray-50 */
            min-height: 100px; /* Ensure it has some height even when empty */
        }
        .status-message {
            text-align: center;
            margin-top: 0.75rem; /* mt-3 */
            padding: 0.5rem;
            border-radius: 0.375rem;
            font-weight: 500;
            display: none; /* Hidden by default */
        }
        .status-success {
            color: #047857; /* text-emerald-700 */
            background-color: #d1fae5; /* bg-emerald-100 */
            border: 1px solid #a7f3d0; /* border-emerald-200 */
        }
        .status-error {
            color: #b91c1c; /* text-red-700 */
            background-color: #fee2e2; /* bg-red-100 */
            border: 1px solid #fecaca; /* border-red-200 */
        }
        .status-info {
            color: #1d4ed8; /* text-blue-700 */
            background-color: #dbeafe; /* bg-blue-100 */
            border: 1px solid #bfdbfe; /* border-blue-200 */
        }
        .divider {
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-bottom: 1px dashed #cbd5e1; /* border-b border-dashed border-slate-300 */
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>üõ†Ô∏è ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ V2 (‡πÇ‡∏´‡∏•‡∏î/‡πÄ‡∏ã‡∏ü)</h1>

        <h2 class="section-title">1. ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</h2>
        <div class="mb-4">
            <label for="load-file-input" class="file-input-label load-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-folder-open inline-block mr-2"><path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"/><path d="M2 10h20"/></svg>
                ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå items.json...
            </label>
            <input type="file" id="load-file-input" accept=".json">
            <p class="text-xs text-gray-500 mt-1">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå `items.json` ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏≥‡∏°‡∏≤‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</p>
        </div>

        <div class="divider"></div>

        <h2 class="section-title">2. ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</h2>
        <div class="input-group">
            <input type="text" id="new-item-input" class="input-field" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà...">
            <button id="add-item-button" class="action-button add-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-plus"><line x1="12" x2="12" y1="5" y2="19"/><line x1="5" x2="19" y1="12" y2="12"/></svg>
                ‡πÄ‡∏û‡∏¥‡πà‡∏°
            </button>
        </div>

        <p class="text-sm text-gray-600 mb-2">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (<span id="item-count">0</span> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£):</p>
        <div class="list-container">
            <ul id="item-list">
                <li id="list-placeholder" class="text-gray-400 italic text-center py-10">
                    üëà ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå .json ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô <br> ‡∏´‡∏£‡∏∑‡∏≠‡∏û‡∏¥‡∏°‡∏û‡πå‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î '‡πÄ‡∏û‡∏¥‡πà‡∏°'
                 </li>
            </ul>
        </div>

        <div class="divider"></div>

        <h2 class="section-title">3. ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß</h2>
        <div class="text-center">
            <button id="download-button" class="action-button download-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-download"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></svg>
                ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î items.json (Save As...)
            </button>
             <p class="text-xs text-gray-500 mt-1">
                ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ã‡∏ü‡πÑ‡∏ü‡∏•‡πå ‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏à‡∏∞‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏ã‡∏ü ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ (‡πÄ‡∏ä‡πà‡∏ô: `/storage/emulated/0/Mao projects/‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏™‡∏±‡πà‡∏á‡∏Ç‡∏≠‡∏á`)
            </p>
        </div>

        <div id="status-message" class="status-message mt-4"></div>

    </div>

    <script>
        // --- Element References ---
        const loadFileInput = document.getElementById('load-file-input');
        const newItemInput = document.getElementById('new-item-input');
        const addItemButton = document.getElementById('add-item-button');
        const itemList = document.getElementById('item-list');
        const itemCountSpan = document.getElementById('item-count');
        const downloadButton = document.getElementById('download-button');
        const statusMessage = document.getElementById('status-message');
        const listPlaceholder = document.getElementById('list-placeholder');

        // --- State ---
        let currentItems = []; // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢ array ‡∏ß‡πà‡∏≤‡∏á

        // --- Functions ---

        /** ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ */
        function showStatus(message, type = 'info') { // type can be 'info', 'success', 'error'
            statusMessage.textContent = message;
            statusMessage.className = `status-message status-${type}`;
            statusMessage.style.display = 'block';
            // ‡∏ã‡πà‡∏≠‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
            setTimeout(() => {
                statusMessage.style.display = 'none';
            }, 5000);
        }

        /** Render ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô List */
        function renderList() {
            itemList.innerHTML = ''; // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πà‡∏≤
            if (currentItems.length === 0) {
                 itemList.appendChild(listPlaceholder); // ‡πÅ‡∏™‡∏î‡∏á placeholder ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
                 listPlaceholder.style.display = 'block';
            } else {
                listPlaceholder.style.display = 'none'; // ‡∏ã‡πà‡∏≠‡∏ô placeholder
                // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÄ‡∏™‡∏°‡∏≠
                const sortedItems = [...currentItems].sort((a, b) => a.localeCompare(b, 'th'));
                sortedItems.forEach((item, index) => {
                    // ‡∏´‡∏≤ index ‡πÄ‡∏î‡∏¥‡∏°‡∏Å‡πà‡∏≠‡∏ô sort ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
                    const originalIndex = currentItems.indexOf(item);

                    const li = document.createElement('li');

                    const itemTextSpan = document.createElement('span');
                    itemTextSpan.textContent = item;
                    itemTextSpan.className = 'item-text';

                    const removeBtn = document.createElement('button');
                    removeBtn.textContent = '‡∏•‡∏ö';
                    removeBtn.className = 'remove-button';
                    // ‡πÉ‡∏ä‡πâ originalIndex ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö
                    removeBtn.addEventListener('click', () => removeItem(originalIndex));

                    li.appendChild(itemTextSpan);
                    li.appendChild(removeBtn);
                    itemList.appendChild(li);
                });
            }
            itemCountSpan.textContent = currentItems.length; // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
        }

        /** ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà */
        function addItem() {
            const newItemName = newItemInput.value.trim();
            if (newItemName === '') {
                showStatus('‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô', 'error');
                return;
            }
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà (‡πÑ‡∏°‡πà‡∏™‡∏ô‡∏ï‡∏±‡∏ß‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏•‡πá‡∏Å/‡πÉ‡∏´‡∏ç‡πà)
            if (currentItems.some(item => item.toLowerCase() === newItemName.toLowerCase())) {
                showStatus(`‚ö†Ô∏è ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ "${newItemName}" ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏ß‡πà‡∏∞!`, 'error');
                return;
            }

            currentItems.push(newItemName);
            newItemInput.value = ''; // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå input
            renderList(); // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• list ‡πÉ‡∏´‡∏°‡πà
            showStatus(`‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ "${newItemName}" ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!`, 'success');
            newItemInput.focus(); // ‡∏¢‡πâ‡∏≤‡∏¢ cursor ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏µ‡πà input
        }

        /** ‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ */
        function removeItem(indexToRemove) {
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö index ‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö
             if (indexToRemove < 0 || indexToRemove >= currentItems.length) {
                console.error("Invalid index for removal:", indexToRemove);
                showStatus('‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£', 'error');
                return;
            }
            const itemNameToRemove = currentItems[indexToRemove];
            currentItems.splice(indexToRemove, 1); // ‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å array
            renderList(); // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• list ‡πÉ‡∏´‡∏°‡πà
            showStatus(`üóëÔ∏è ‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ "${itemNameToRemove}" ‡πÅ‡∏•‡πâ‡∏ß`, 'info');
        }

        /** ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå JSON */
        function downloadJson() {
            if (currentItems.length === 0) {
                showStatus('ü§∑ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏•‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô', 'error');
                return;
            }
            // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î
            const sortedItems = [...currentItems].sort((a, b) => a.localeCompare(b, 'th'));
            const jsonString = JSON.stringify(sortedItems, null, 2); // ‡∏à‡∏±‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÉ‡∏´‡πâ‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢ (indent 2 spaces)
            const blob = new Blob([jsonString], { type: 'application/json' });
            const url = URL.createObjectURL(blob);

            const a = document.createElement('a');
            a.href = url;
            a.download = 'items.json'; // ‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡∏ï‡∏≠‡∏ô‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î (‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏î‡πâ‡∏ï‡∏≠‡∏ô‡πÄ‡∏ã‡∏ü)
            document.body.appendChild(a); // ‡∏ï‡πâ‡∏≠‡∏á append ‡πÄ‡∏Ç‡πâ‡∏≤ DOM ‡∏Å‡πà‡∏≠‡∏ô‡∏ñ‡∏∂‡∏á‡∏à‡∏∞‡∏Ñ‡∏•‡∏¥‡∏Å‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏ö‡∏≤‡∏á browser
            a.click();
            document.body.removeChild(a); // ‡∏•‡∏ö element ‡∏≠‡∏≠‡∏Å‡∏´‡∏•‡∏±‡∏á‡∏Ñ‡∏•‡∏¥‡∏Å
            URL.revokeObjectURL(url); // ‡∏Ñ‡∏∑‡∏ô memory
            // ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏™‡∏î‡∏á status ‡∏ï‡∏≠‡∏ô‡∏Å‡∏î‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ browser ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏≠‡∏á
        }

        /** ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå */
        function handleFileLoad(event) {
            const file = event.target.files[0];
            if (!file) {
                return; // ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå
            }

            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏ü‡∏•‡πå JSON ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà (‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô)
            if (!file.name.endsWith('.json') && file.type !== 'application/json') {
                 showStatus(`‚ùå ‡πÑ‡∏ü‡∏•‡πå "${file.name}" ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà .json ‡∏ß‡πà‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏î‡∏¥‡πä`, 'error');
                 loadFileInput.value = ''; // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Ñ‡πà‡∏≤ input file
                 return;
            }

            const reader = new FileReader();

            reader.onload = function(e) {
                try {
                    const fileContent = e.target.result;
                    const parsedData = JSON.parse(fileContent);

                    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô Array ‡∏Ç‡∏≠‡∏á String ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
                    if (!Array.isArray(parsedData) || !parsedData.every(item => typeof item === 'string')) {
                        throw new Error('‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô Array ‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°)');
                    }

                    currentItems = parsedData; // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
                    renderList(); // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÇ‡∏´‡∏•‡∏î‡∏°‡∏≤
                    showStatus(`‚úÖ ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå "${file.name}" ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (${currentItems.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)`, 'success');

                } catch (error) {
                    console.error("Error parsing JSON:", error);
                    showStatus(`‚ùå ‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏ü‡∏•‡πå JSON ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ß‡πà‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô ‡πÑ‡∏ü‡∏•‡πå‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡πÄ‡∏™‡∏µ‡∏¢ (${error.message})`, 'error');
                    // ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå currentItems ‡∏ñ‡πâ‡∏≤‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏™‡∏µ‡∏¢ ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏¥‡∏°‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô
                } finally {
                     loadFileInput.value = ''; // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Ñ‡πà‡∏≤ input file ‡∏´‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à (‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏Å‡πá‡∏ï‡∏≤‡∏°)
                }
            };

            reader.onerror = function(e) {
                console.error("File reading error:", e);
                showStatus(`‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ï‡∏≠‡∏ô‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏ü‡∏•‡πå "${file.name}"`, 'error');
                 loadFileInput.value = ''; // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Ñ‡πà‡∏≤ input file
            };

            reader.readAsText(file); // ‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏õ‡πá‡∏ô Text
        }


        // --- Event Listeners ---
        loadFileInput.addEventListener('change', handleFileLoad); // Listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå
        addItemButton.addEventListener('click', addItem);
        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏î‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡∏î Enter ‡πÉ‡∏ô input
        newItemInput.addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                event.preventDefault(); // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£ submit ‡∏ü‡∏≠‡∏£‡πå‡∏° (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
                addItem();
            }
        });
        downloadButton.addEventListener('click', downloadJson);

        // --- Initial Load ---
        renderList(); // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (‡∏ã‡∏∂‡πà‡∏á‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô placeholder)

    </script>

</body>
</html>
